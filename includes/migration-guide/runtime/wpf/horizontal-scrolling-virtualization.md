### <a name="horizontal-scrolling-and-virtualization"></a><span data-ttu-id="e0bfd-101">水平滚动和虚拟化</span><span class="sxs-lookup"><span data-stu-id="e0bfd-101">Horizontal scrolling and virtualization</span></span>

|   |   |
|---|---|
|<span data-ttu-id="e0bfd-102">详细信息</span><span class="sxs-lookup"><span data-stu-id="e0bfd-102">Details</span></span>|<span data-ttu-id="e0bfd-103">此更改适用于<xref:System.Windows.Controls.ItemsControl?displayProperty=name>执行方向与主要滚动方向正交自己虚拟化 (首席示例是<xref:System.Windows.Controls.DataGrid?displayProperty=name>EnableColumnVirtualization =&quot;True&quot;)。</span><span class="sxs-lookup"><span data-stu-id="e0bfd-103">This change applies to an <xref:System.Windows.Controls.ItemsControl?displayProperty=name> that does its own virtualization in the direction orthogonal to the main scrolling direction (the chief example is <xref:System.Windows.Controls.DataGrid?displayProperty=name> with EnableColumnVirtualization=&quot;True&quot;).</span></span>  <span data-ttu-id="e0bfd-104">已更改的某些水平滚动操作的结果来生成结果更直观且更类似于可比较的垂直操作的结果。操作包括&quot;此处滚动&quot;和&quot;右边缘&quot;，则应使用来自通过右键单击水平滚动条来获取的菜单的名称。</span><span class="sxs-lookup"><span data-stu-id="e0bfd-104">The outcome of certain horizontal scrolling operations has been changed to produce results that are more intuitive and more analogous to the results of comparable vertical operations.The operations include &quot;Scroll Here&quot; and &quot;Right Edge&quot;, to use the names from the menu obtained by right-clicking a horizontal scrollbar.</span></span>  <span data-ttu-id="e0bfd-105">这两种计算候选偏移量和调用<xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>。滚动到新的偏移量的概念后&quot;此处&quot;或&quot;边缘&quot;可能已更改，因为新取消虚拟化的内容已更改的值<xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>。在.Net 4.6.2 之前, 滚动操作只需使用候选偏移量，即使它可能不&quot;此处&quot;或在&quot;边缘&quot;更。</span><span class="sxs-lookup"><span data-stu-id="e0bfd-105">Both of these compute a candidate offset and call <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>.After scrolling to the new offset, the notion of &quot;here&quot; or &quot;right edge&quot; may have changed because newly de-virtualized content has changed the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>.Prior to .Net 4.6.2, the scroll operation simply uses the candidate offset, even though it may not be &quot;here&quot; or at the &quot;right edge&quot; any more.</span></span>  <span data-ttu-id="e0bfd-106">这会导致效果，例如&quot;会传来传去&quot;滚动块，最佳示例所示。</span><span class="sxs-lookup"><span data-stu-id="e0bfd-106">This results in effects like &quot;bouncing&quot; the scroll thumb, best illustrated by example.</span></span> <span data-ttu-id="e0bfd-107">假设<xref:System.Windows.Controls.DataGrid?displayProperty=name>具有 ExtentWidth = 1000年和宽度 = 200。</span><span class="sxs-lookup"><span data-stu-id="e0bfd-107">Suppose a <xref:System.Windows.Controls.DataGrid?displayProperty=name> has ExtentWidth=1000 and Width=200.</span></span>  <span data-ttu-id="e0bfd-108">滚动到&quot;右边缘&quot;使用候选偏移量 1000年 200 = 800。</span><span class="sxs-lookup"><span data-stu-id="e0bfd-108">A scroll to &quot;Right Edge&quot; uses candidate offset 1000 - 200 = 800.</span></span>  <span data-ttu-id="e0bfd-109">时滚动到该偏移量，新列是 de-虚拟化;让我们假设它们是范围很大，以便<xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>更改为 2000年。</span><span class="sxs-lookup"><span data-stu-id="e0bfd-109">While scrolling to that offset, new columns are de- virtualized; let's suppose they are very wide, so that the <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> changes to 2000.</span></span>  <span data-ttu-id="e0bfd-110">Scroll 结尾 HorizontalOffset = 800 和滚动块&quot;退回&quot;回附近的滚动条的中间精确的在 800/2000年 = 40%。更改是这种情况发生，然后重试时，重新计算新的候选偏移量。</span><span class="sxs-lookup"><span data-stu-id="e0bfd-110">The scroll ends with HorizontalOffset=800, and the thumb &quot;bounces&quot; back to near the middle of the scrollbar - precisely at 800/2000 = 40%.The change is to recompute a new candidate offset when this situation occurs, and try again.</span></span> <span data-ttu-id="e0bfd-111">(这是如何垂直滚动已工作。)更改所生成的最终用户，更易于预测和直观的体验，但它还可能会影响任何应用程序依赖于的确切值<xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name>水平滚动，是否被最终用户或通过显式调用调用后<xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>。</span><span class="sxs-lookup"><span data-stu-id="e0bfd-111">(This is how vertical scrolling works already.)The change produces a more predictable and intuitive experience for the end user, but it could also affect any app that depends on the exact value of <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> after a horizontal scroll, whether invoked by the end user or by an explicit call to <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>.</span></span>|
|<span data-ttu-id="e0bfd-112">建议</span><span class="sxs-lookup"><span data-stu-id="e0bfd-112">Suggestion</span></span>|<span data-ttu-id="e0bfd-113">使用的预测的值的应用程序<xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name>应将更改为提取的实际值 (和的值<xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>) 后无法更改任何水平滚动<xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>由于重复数据的虚拟化。</span><span class="sxs-lookup"><span data-stu-id="e0bfd-113">An app that uses a predicted value for <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> should be changed to fetch the actual value (and the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>) after any horizontal scroll that could change <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> due to de-virtualization.</span></span>|
|<span data-ttu-id="e0bfd-114">范围</span><span class="sxs-lookup"><span data-stu-id="e0bfd-114">Scope</span></span>|<span data-ttu-id="e0bfd-115">次要</span><span class="sxs-lookup"><span data-stu-id="e0bfd-115">Minor</span></span>|
|<span data-ttu-id="e0bfd-116">版本</span><span class="sxs-lookup"><span data-stu-id="e0bfd-116">Version</span></span>|<span data-ttu-id="e0bfd-117">4.6.2</span><span class="sxs-lookup"><span data-stu-id="e0bfd-117">4.6.2</span></span>|
|<span data-ttu-id="e0bfd-118">类型</span><span class="sxs-lookup"><span data-stu-id="e0bfd-118">Type</span></span>|<span data-ttu-id="e0bfd-119">运行时</span><span class="sxs-lookup"><span data-stu-id="e0bfd-119">Runtime</span></span>|
|<span data-ttu-id="e0bfd-120">受影响的 API</span><span class="sxs-lookup"><span data-stu-id="e0bfd-120">Affected APIs</span></span>|<ul><li><xref:System.Windows.Controls.Primitives.IScrollInfo?displayProperty=nameWithType></li></ul>|

