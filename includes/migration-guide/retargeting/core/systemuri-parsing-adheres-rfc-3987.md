### <a name="systemuri-parsing-adheres-to-rfc-3987"></a><span data-ttu-id="3c011-101">System.Uri 分析符合 RFC 3987</span><span class="sxs-lookup"><span data-stu-id="3c011-101">System.Uri parsing adheres to RFC 3987</span></span>

|   |   |
|---|---|
|<span data-ttu-id="3c011-102">详细信息</span><span class="sxs-lookup"><span data-stu-id="3c011-102">Details</span></span>|<span data-ttu-id="3c011-103">URI 分析在 .NET 4.5 中做了几方面的更改。</span><span class="sxs-lookup"><span data-stu-id="3c011-103">URI parsing has changed in several ways in .NET 4.5.</span></span> <span data-ttu-id="3c011-104">但请注意，这些更改仅影响面向 .NET 4.5 的代码。</span><span class="sxs-lookup"><span data-stu-id="3c011-104">Note, however, that these changes only affect code targeting .NET 4.5.</span></span> <span data-ttu-id="3c011-105">如果二进制文件面向 .NET 4.0，将遵守旧行为。</span><span class="sxs-lookup"><span data-stu-id="3c011-105">If a binary targets .NET 4.0, the old behavior will be observed.</span></span> <span data-ttu-id="3c011-106">.NET 4.5 中对 URI 分析所做的更改包括：</span><span class="sxs-lookup"><span data-stu-id="3c011-106">Changes to URI parsing in .NET 4.5 include:</span></span><ul><li><span data-ttu-id="3c011-107">规范化和根据 RFC 3987 中的最新 IRI 规则检查的字符，将执行分析的 URI。</span><span class="sxs-lookup"><span data-stu-id="3c011-107">URI parsing will perform normalization and character checking according to the latest IRI rules in RFC 3987.</span></span></li><li><span data-ttu-id="3c011-108">只能将对 URI 的主机部分执行 Unicode 范式 C。</span><span class="sxs-lookup"><span data-stu-id="3c011-108">Unicode normalization form C will only be performed on the host portion of the URI.</span></span></li><li><span data-ttu-id="3c011-109">无效的 mailto： 现在将导致异常，Uri。</span><span class="sxs-lookup"><span data-stu-id="3c011-109">Invalid mailto: URIs will now cause an exception.</span></span></li><li><span data-ttu-id="3c011-110">现在保留路径段的末尾的尾随点。</span><span class="sxs-lookup"><span data-stu-id="3c011-110">Trailing dots at the end of a path segment are now preserved.</span></span></li><li><span data-ttu-id="3c011-111"><code>file://</code> 将不会转义 Uri<code>?</code>字符。</span><span class="sxs-lookup"><span data-stu-id="3c011-111"><code>file://</code> URIs do not escape the <code>?</code> character.</span></span></li><li><span data-ttu-id="3c011-112">Unicode 控制字符<code>U+0080</code>通过<code>U+009F</code>不支持。</span><span class="sxs-lookup"><span data-stu-id="3c011-112">Unicode control characters <code>U+0080</code> through <code>U+009F</code> are not supported.</span></span></li><li><span data-ttu-id="3c011-113">逗号字符<code>,</code>或<code>%2c</code>不会自动取消转义。</span><span class="sxs-lookup"><span data-stu-id="3c011-113">Comma characters <code>,</code> or <code>%2c</code> are not automatically unescaped.</span></span></li></ul>|
|<span data-ttu-id="3c011-114">建议</span><span class="sxs-lookup"><span data-stu-id="3c011-114">Suggestion</span></span>|<span data-ttu-id="3c011-115">如果需要使用旧的 .NET 4.0 URI 分析语义（通常不需要），可通过面向 .NET 4.0 使用它们。</span><span class="sxs-lookup"><span data-stu-id="3c011-115">If the old .NET 4.0 URI parsing semantics are necessary (they often aren't), they can be used by targeting .NET 4.0.</span></span> <span data-ttu-id="3c011-116">这可以通过使用来实现<xref:System.Runtime.Versioning.TargetFrameworkAttribute?displayProperty=name>上该程序集，或通过在项目属性页中的 Visual Studio 的项目系统 UI。</span><span class="sxs-lookup"><span data-stu-id="3c011-116">This can be accomplished by using a <xref:System.Runtime.Versioning.TargetFrameworkAttribute?displayProperty=name> on the assembly, or through Visual Studio's project system UI in the 'project properties' page.</span></span>|
|<span data-ttu-id="3c011-117">范围</span><span class="sxs-lookup"><span data-stu-id="3c011-117">Scope</span></span>|<span data-ttu-id="3c011-118">主要</span><span class="sxs-lookup"><span data-stu-id="3c011-118">Major</span></span>|
|<span data-ttu-id="3c011-119">版本</span><span class="sxs-lookup"><span data-stu-id="3c011-119">Version</span></span>|<span data-ttu-id="3c011-120">4.5</span><span class="sxs-lookup"><span data-stu-id="3c011-120">4.5</span></span>|
|<span data-ttu-id="3c011-121">类型</span><span class="sxs-lookup"><span data-stu-id="3c011-121">Type</span></span>|<span data-ttu-id="3c011-122">重定目标</span><span class="sxs-lookup"><span data-stu-id="3c011-122">Retargeting</span></span>|
|<span data-ttu-id="3c011-123">受影响的 API</span><span class="sxs-lookup"><span data-stu-id="3c011-123">Affected APIs</span></span>|<ul><li><xref:System.Uri.%23ctor(System.String)?displayProperty=nameWithType></li><li><xref:System.Uri.%23ctor(System.String,System.Boolean)?displayProperty=nameWithType></li><li><xref:System.Uri.%23ctor(System.String,System.UriKind)?displayProperty=nameWithType></li><li><xref:System.Uri.%23ctor(System.Uri,System.String)?displayProperty=nameWithType></li><li><xref:System.Uri.TryCreate(System.String,System.UriKind,System.Uri@)?displayProperty=nameWithType></li><li><xref:System.Uri.TryCreate(System.Uri,System.String,System.Uri@)?displayProperty=nameWithType></li><li><xref:System.Uri.TryCreate(System.Uri,System.Uri,System.Uri@)?displayProperty=nameWithType></li></ul>|

