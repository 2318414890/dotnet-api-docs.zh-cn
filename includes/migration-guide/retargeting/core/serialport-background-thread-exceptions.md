### <a name="serialport-background-thread-exceptions"></a><span data-ttu-id="3df97-101">无效/不后台线程异常</span><span class="sxs-lookup"><span data-stu-id="3df97-101">SerialPort background thread exceptions</span></span>

|   |   |
|---|---|
|<span data-ttu-id="3df97-102">详细信息</span><span class="sxs-lookup"><span data-stu-id="3df97-102">Details</span></span>|<span data-ttu-id="3df97-103">后台线程使用创建<xref:System.IO.Ports.SerialPort>流不再终止进程引发 OS 异常时。在面向.NET Framework 4.7 和早期版本的应用程序，进程将终止时创建与后台线程上引发操作系统异常<xref:System.IO.Ports.SerialPort>流。在应用程序中，面向.NET Framework 4.7.1 或更高版本，后台线程等待的是操作系统事件与活动的串行端口和相关可能会崩溃在某些情况下，例如突然删除串行端口。</span><span class="sxs-lookup"><span data-stu-id="3df97-103">Background threads created with <xref:System.IO.Ports.SerialPort> streams no longer terminate the process when OS exceptions are thrown.In applications that target the .NET Framework 4.7 and earlier versions, a process is terminated when an operating system exception is thrown on a background thread created with a <xref:System.IO.Ports.SerialPort> stream.In applications that target the .NET Framework 4.7.1 or a later version, background threads wait for OS events related to the active serial port and could crash in some cases, such as sudden removal of the serial port.</span></span>|
|<span data-ttu-id="3df97-104">建议</span><span class="sxs-lookup"><span data-stu-id="3df97-104">Suggestion</span></span>|<span data-ttu-id="3df97-105">对于面向.NET Framework 4.7.1 的应用程序，你可以选择退出异常处理，如果这是不值得通过添加以下<code>&lt;runtime&gt;</code>部分你<code>app.config</code>文件：</span><span class="sxs-lookup"><span data-stu-id="3df97-105">For apps that target the .NET Framework 4.7.1, you can opt out of the exception handling if it is not desirable by adding the following to the <code>&lt;runtime&gt;</code> section of your <code>app.config</code> file:</span></span><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.IO.Ports.DoNotCatchSerialStreamThreadExceptions=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="3df97-106">对于面向的应用的.NET framework 的早期版本但在.NET Framework 4.7.1 上运行或更高版本，你可以选择在异常处理通过添加以下<code>&lt;runtime&gt;</code>部分你<code>app.config</code>文件：</span><span class="sxs-lookup"><span data-stu-id="3df97-106">For apps that target earlier versions of the .NET Framework but run on the .NET Framework 4.7.1 or later, you can opt in to the exception handling by adding the following to the <code>&lt;runtime&gt;</code> section of your <code>app.config</code> file:</span></span><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.IO.Ports.DoNotCatchSerialStreamThreadExceptions=false&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>|
|<span data-ttu-id="3df97-107">范围</span><span class="sxs-lookup"><span data-stu-id="3df97-107">Scope</span></span>|<span data-ttu-id="3df97-108">次要</span><span class="sxs-lookup"><span data-stu-id="3df97-108">Minor</span></span>|
|<span data-ttu-id="3df97-109">版本</span><span class="sxs-lookup"><span data-stu-id="3df97-109">Version</span></span>|<span data-ttu-id="3df97-110">4.7.1</span><span class="sxs-lookup"><span data-stu-id="3df97-110">4.7.1</span></span>|
|<span data-ttu-id="3df97-111">类型</span><span class="sxs-lookup"><span data-stu-id="3df97-111">Type</span></span>|<span data-ttu-id="3df97-112">重定目标</span><span class="sxs-lookup"><span data-stu-id="3df97-112">Retargeting</span></span>|
|<span data-ttu-id="3df97-113">受影响的 API</span><span class="sxs-lookup"><span data-stu-id="3df97-113">Affected APIs</span></span>|<ul><li><xref:System.IO.Ports.SerialPort?displayProperty=nameWithType></li></ul>|

