### <a name="currentculture-is-not-preserved-across-wpf-dispatcher-operations"></a>CurrentCulture 不会保留在 WPF 调度程序操作

|   |   |
|---|---|
|详细信息|从.NET Framework 4.6 开始，更改为<xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name>或<xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>范围内进行<xref:System.Windows.Threading.Dispatcher?displayProperty=name>都将丢失该调度程序操作的末尾。 同样，更改为<xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name>或<xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>之外调度程序进行操作可能不会反映在操作执行。事实上，这意味着，<xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name>和<xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>之间 WPF UI 回调和 WPF 应用程序中的其他代码进行更改可能流。这是因为发生了更改<xref:System.Threading.ExecutionContext?displayProperty=name>，从而导致<xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name>和<xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>要存储在开始的执行上下文中适用于面向.NET Framework 4.6 的应用。 WPF 调度程序操作存储用于启动操作的执行上下文，并在操作完成时还原以前的上下文。 由于 <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> 和 <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> 现在属于该上下文，因此，在调度程序操作中对它们所做的更改在操作之外不会保留。|
|建议|此更改影响的应用程序可能要解决它，通过将存储所需<xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name>或<xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>中字段和签入 （包括用户界面事件回调处理程序） 的所有调度程序操作正文的正确<xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name>和<xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>设置。 或者，因为 ExecutionContext 更改基础此 WPF 更改仅影响面向.NET Framework 4.6 或更高版本的应用，通过面向.NET Framework 4.5.2.Apps 面向.NET Framework 4.6 或更高版本可一同使用，可以避免此中断解决此通过设置以下兼容性开关:<pre><code>AppContext.SetSwitch(&quot;Switch.System.Globalization.NoAsyncCurrentCulture&quot;, true);&#13;&#10;</code></pre>.NET Framework 4.6.2 中的 WPF 的已修复此问题。 它还中已修复了.NET 框架 4.6，通过 4.6.1 [KB 3139549](https://support.microsoft.com/kb/3139549)。 面向 4.6 或更高版本的.NET 应用程序将自动获得正确的行为在 WPF 应用程序- <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> / <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>) 将保留在调度程序操作。|
|范围|次要|
|版本|4.6|
|类型|重定目标|

